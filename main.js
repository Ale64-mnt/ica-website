(function(){var here=location.pathname.replace(/\/index\.html$/,'/');document.querySelectorAll('nav#mainMenu a').forEach(function(a){var href=a.getAttribute('href');if(!href)return;var norm=href.replace(/\/index\.html$/,'/');if(here===norm)a.style.background='#eef4ff';});})();(function(){var el=document.getElementById('newsList');if(!el)return;var src=el.getAttribute('data-news-src');if(!src)return;fetch(src).then(r=>r.json()).then(data=>{var items=data.items||data;el.innerHTML=items.map(it=>{var d=it.date?new Date(it.date).toLocaleDateString(document.documentElement.lang||'it-IT',{year:'numeric',month:'short',day:'2-digit'):'';var img=it.image?`<img src="${it.image}" alt="" style="max-width:100%;border-radius:10px;margin:8px 0">`:'';var vid=it.video?`<p><a href="${it.video}" target="_blank" rel="noopener">Guarda il video</a></p>`:'';var link=it.link?`<p><a href="${it.link}" target="_blank" rel="noopener">Leggi →</a></p>`:'';return `<article class="news-card"><h3>${it.title||''}</h3><div class="small">${d}${it.author?(' · '+it.author):''}</div>${img}<p>${it.summary||''}</p>${vid}${link}</article>`;}).join('');}).catch(()=>{el.innerHTML='<p>Impossibile caricare le news.</p>';});})();